import React, { useEffect, useRef } from 'react'
import { Link } from 'react-router-dom'
import logo from "../../assets/lelulogo.png"
import './AnimatedNav.css'
import { useTranslation } from 'react-i18next'
import NavComponents from './navComponents/NavComponents'
import { useLocation } from 'react-router-dom'
import Toggle from '../darkmode/Toggle'
import { useUserAuth } from '../../components/authContext/AuthContext'

const AnimatedNav = () => {

    const { t } = useTranslation()
    const { user } = useUserAuth()
    const [teesOpen, setTeesOpen] = React.useState(false)
    const TeesdropdownRef = useRef(null);
    const [navOpen, setNavOpen] = React.useState(false)
    const [searchOpen, setSearchOpen] = React.useState(false)

    const handleTees = (event) => {
        event.stopPropagation();
        setTeesOpen(!teesOpen);
    };



    const handleClickOutside = (event) => {
        if (TeesdropdownRef.current && !TeesdropdownRef.current.contains(event.target)) {
            setTeesOpen(false);
        }
    };

    useEffect(() => {
        document.addEventListener('click', handleClickOutside);
        return () => {
            document.removeEventListener('click', handleClickOutside);
        };
    }, []);

    return (
        <>
            <nav className='nav'>
                <div className="nav__container">
                    <div className="left__navbar">
                        <Link to="/shop">
                            <div className="menu__toggle">
                                <h1>Shop</h1>
                            </div>
                        </Link>
                    </div>
                    <div className="logo">
                        <Link to="/">
                            {/* <svg>
                                <path fill="#000009" d="M312.866 202.688L313.294 202.771C314.118 203.537 314.867 204.331 315.368 205.354C315.849 206.338 315.935 207.47 315.366 208.422C313.953 210.787 311.276 213.141 309.461 215.287C304.251 221.452 299.897 228.312 297.123 235.922C292.48 248.658 291.02 263.59 295.92 276.471C297.546 280.745 300.008 284.609 301.944 288.737C305.057 284.354 308.757 280.537 312.355 276.562C317.176 271.236 321.919 265.838 326.687 260.464C338.352 247.315 349.577 233.611 361.627 220.825C362.425 219.977 363.275 219.097 364.5 219.058C366.123 220.081 366.958 222.095 367.431 223.875C367.069 225.86 365.471 227.583 364.224 229.11C362.179 231.614 360.093 234.085 358.054 236.595C345.027 252.629 331.412 268.025 317.986 283.71C314.649 287.609 311.477 291.633 308.334 295.689C310.01 298.214 312.61 300.578 314.683 302.812C319.802 308.33 325.041 313.733 330.159 319.252C335.901 325.444 341.4 331.858 347.12 338.071C359.036 351.012 371.198 363.734 383.488 376.318L459.741 294.902L401.049 224.342C401.239 223.406 401.68 222.516 402.138 221.683C402.902 220.293 403.709 219.499 405.188 219.028C407.495 219.902 410.788 224.856 412.543 226.875C421.277 236.926 429.713 247.223 438.437 257.276C447.495 267.715 456.701 278.032 465.935 288.315C471.323 281.489 474.583 271.364 475.096 262.756C475.935 248.679 472.832 234.071 465.107 222.153C461.687 216.877 457.52 212.342 453.383 207.643C454.344 205.612 455.288 204.105 456.8 202.431C461.296 205.09 465.45 209.116 468.71 213.165C489.103 238.499 489.933 271.536 471.164 297.942C467.591 302.969 463.157 307.379 458.859 311.782C453.936 316.826 449.027 321.883 444.129 326.951C431.584 339.932 419.062 352.968 406.392 365.825C401.432 370.86 396.053 375.806 391.636 381.327C391.125 381.966 389.901 383.198 389.636 383.941C389.091 385.465 389.429 388.841 389.409 390.5C389.33 397.213 389.355 403.925 389.376 410.638C389.458 437.279 389.263 463.913 389.281 490.551C389.287 499.159 389.313 507.767 389.325 516.376C389.333 521.457 389.617 526.746 389.045 531.79L388.987 532.254C397.063 521.084 406.573 511.107 415.534 500.661C421.808 493.347 427.526 485.576 433.721 478.195C438.655 472.317 443.662 466.539 448.31 460.426C448.868 459.691 450.479 458.007 450.72 457.237C450.892 456.689 450.726 455.292 450.728 454.676C450.734 452.395 450.74 450.114 450.749 447.833C450.795 436.728 450.88 425.622 450.894 414.517C450.897 411.61 450.81 408.71 450.764 405.804C450.744 404.52 450.52 403.12 451.274 402.01L451.551 401.625C455.335 395.826 461.429 392.875 466.897 388.882C469.601 386.906 472.196 384.81 474.56 382.434C479.822 377.146 484.146 371.033 488.786 365.217C489.35 364.509 491.462 362.511 491.588 361.718C482.84 361.742 474.659 363.107 466.311 365.735C450.916 370.581 436.569 378.05 423.626 387.685C418.346 391.616 413.207 395.799 408.968 400.868C405.765 404.698 403.311 408.776 401.005 413.197C400.98 409.772 401.223 406.441 402.2 403.142C407.552 385.064 425.951 373.862 441.618 365.474C457.08 357.817 473.275 353.53 490.521 352.89C493.702 352.772 497.543 352.423 500.625 353.17C501.404 353.864 501.71 353.987 501.667 355.125C501.546 358.312 498.998 362.689 497.473 365.418C491.335 376.404 483.052 386.594 473.346 394.644C470.167 397.281 466.67 399.563 463.566 402.282C463.23 402.576 462.061 403.465 461.898 403.826C461.76 404.132 461.809 405.32 461.79 405.706C461.672 408.123 461.713 410.552 461.704 412.971C461.669 422.969 461.643 432.968 461.599 442.966C461.58 447.481 461.958 452.33 461.493 456.786C461.129 460.284 457.668 463.758 455.562 466.421C450.976 472.22 445.978 478.995 440.27 483.704C439.665 484.202 439.894 484.758 439.895 485.497C439.934 507.968 440.233 530.438 440.258 552.911C440.262 555.999 441.025 570.521 439.688 572.43C438.981 573.438 438.046 573.917 436.875 574.115C435.57 573.839 434.756 573.255 433.814 572.311C433.25 571.745 433.045 571.223 432.992 570.423C432.513 563.238 433.051 555.606 433.007 548.374C432.894 529.949 432.88 511.518 432.604 493.094C421.888 504.848 411.769 517.143 401.622 529.388C396.155 535.985 390.946 544.398 384.085 549.535C378.385 545.765 373.588 538.937 369.1 533.841C362.161 525.962 355.43 517.913 348.679 509.872C344.424 504.804 340.012 499.817 336 494.555L335.546 570.75C335.406 572.031 334.71 572.946 333.582 573.563C332.949 573.909 332.157 574.011 331.468 573.856C330.34 573.601 328.947 572.387 328.634 571.265C327.903 568.646 328.409 564.358 328.408 561.583C328.404 553.812 328.415 546.04 328.425 538.269C328.444 523.956 328.458 509.642 328.482 495.329C328.487 492.62 328.492 489.911 328.511 487.202C328.516 486.55 328.724 485.2 328.531 484.66C328.341 484.131 327.313 483.363 326.89 482.964C325.252 481.421 323.71 479.805 322.185 478.152C317.392 472.955 311.604 467.143 307.972 461.075L307.604 460.451C305.711 457.319 306.644 449.357 306.62 445.596C306.546 434.45 306.49 423.304 306.429 412.158C306.418 410.198 306.407 408.238 306.396 406.278C306.394 405.869 306.514 404.417 306.384 404.107C306.242 403.768 304.859 402.728 304.525 402.437C301.114 399.469 297.294 397.004 293.827 394.105C291.516 392.172 289.286 390.077 287.217 387.887C279.533 379.757 273.049 371.056 268.802 360.669C268.009 358.729 266.861 356.49 266.913 354.375C267.593 353.639 267.681 353.386 268.708 353.262C271.828 352.886 275.398 353.185 278.549 353.279C302.271 353.985 326.355 363.011 345.215 377.392C356.438 385.95 365.841 397.248 367.729 411.616C366.888 411.243 365.164 407.902 364.526 406.975C362.187 403.574 359.372 400.5 356.476 397.57C351.854 392.894 346.536 388.852 341.177 385.062C322.391 371.775 299.187 362.085 275.949 361.874C282.724 369.518 288.413 378.048 296.232 384.737C302.475 390.078 312.263 394.247 316.63 401.254C318.096 403.604 317.554 440.613 317.56 447.435C317.562 449.677 316.855 455.635 317.836 457.453C323.174 467.341 331.669 475.936 338.705 484.654C345.599 493.194 352.042 502.091 359.254 510.375C365.521 517.573 372.376 524.139 377.591 532.186C377.556 519.418 377.989 506.643 377.974 493.864C377.943 467.41 377.498 440.957 377.518 414.5C377.524 406.329 377.518 398.156 377.576 389.984C377.586 388.59 378.069 384.892 377.647 383.707C377.446 383.141 376.132 381.924 375.682 381.391C371.575 376.529 367.02 372.096 362.628 367.497C350.454 354.75 338.256 342.036 326.182 329.193C321.261 323.96 316.299 318.776 311.272 313.643C301.782 303.953 293.444 295.298 288.028 282.527C281.121 266.243 282.11 249.108 288.749 232.953C292.568 223.659 298.42 215.205 305.62 208.224C307.833 206.078 309.97 203.894 312.866 202.688Z"/>
                            </svg> */}
                            {/* <img src={logo} alt="" /> */}
                            <h1>LELU</h1>
                        </Link>
                    </div>
                    <div className="rest__navbar">
                        <div className="search-container">
                            <input type="text" className={`${searchOpen ? "search-input" : "search-input-hidden"}`} placeholder="Search" />
                            <div className="search__user_icons">
                                <i className='bx bx-search search-icon' onClick={() => setSearchOpen(!searchOpen)}></i>
                                <i className='bx bx-user user__icon'></i>
                            </div>
                        </div>
                        <div className="nav__logins">
                            <NavComponents navOpen={navOpen} />
                        </div>
                        <Link className="createpost__button " to={user ? "/createpost" : "/signup"}>
                            <i className='bx bx-cart' ></i>
                            <h3 className='cart-icon '>CART</h3>
                        </Link>
                    </div>
                    <div className="nav-overlay" style={{
                        top: navOpen ? "0%" : "-300%",
                        transitionDelay: navOpen ? "0s" : "0s",
                        transitionDuration: navOpen ? "1s" : "1.5s",
                    }}>
                    </div>
                </div>
            </nav>
            <nav className='nav__second'>
                <div className="nav__container_second">
                    <div className="nav__content">
                        <ul>
                            <li><Link to="/"><span className='new__arrivals1'>Arrivals</span></Link></li>
                            <li><Link to="/"><a href="/" className='new__arrivals2'>New Arrivals</a></Link></li>
                            <li><Link to="/">Categories</Link></li>
                            <li><Link to="/collection">Collections</Link></li>
                            <li><Link to="/">Accessories</Link></li>
                            <li><Link to="/">About</Link></li>
                            <li><Link to="/contact">Contact</Link></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </>
    )
}


export default AnimatedNav





/* <ul className='rest__left_links'>
    <li className='tees__menu'>
        <h3 onClick={handleTees}>
            Categories
        </h3>
        <i className={`bx bx-chevron-${teesOpen ? "up" : "down"}`} onClick={handleTees} style={{ transition: "transition: all 0.8s cubic-bezier(0.19, 1, 0.22, 1)" }}></i>
        {teesOpen && <div className="tees__menu__dropdown" ref={TeesdropdownRef}>
            <ul>
                <li><Link to="/">Tees</Link></li>
                <li><Link to="/">Hoodies</Link></li>
                <li><Link to="/">Cargos</Link></li>
                <li><Link to="/">Accessories</Link></li>
            </ul>
        </div>}
    </li>
    <li className='nav__collections'><Link to="/collection">Collections</Link></li>
    <li className='nav__about'><Link to="/collection">About Us</Link></li>
</ul> */
